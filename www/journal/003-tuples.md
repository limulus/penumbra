---
tags: journal
layout: penumbra-journal-entry
title: 'Chapter 1: Tuples'
date: 2023-11-18 19:51:00 -07:00
teaser: |-
  An interactive web component already!
---

The first chapter of the book focuses on setting up a foundational “tuple” library for
operations on vectors and points. I didn’t really expect there to be much to show for this
other than working tests. But the chapter ended with a suggestion for creating a small
program to experiment with a mini physics simulation that fires projectiles at various
angles and velocities and have their trajectories effected by gravity and wind.

I decided to take this a step further and create a web component that would animate the
projectile on a canvas. Here it is in action:

<figure>
  <figcaption>
    <a href="https://github.com/limulus/penumbra/blob/main/src/demo/projectile-cannon/index.ts">&lt;projectile-cannon&gt;</a>
  </figcaption>
  <projectile-cannon>
    Loading…
  </projectile-cannon>
</figure>

<script type="module" async>
  import { ProjectileCannon } from '../../demo/projectile-cannon/index.js'
  customElements.define('projectile-cannon', ProjectileCannon)
</script>

I attempted to represent the <math display="inline"><mi>z</mi></math> axis by
increasing/decreasing the size of the projectile. Something seems off with that though.

GitHub Copilot was helpful when writing the [tuple tests]. I could take the Gherkin test
from the book, put it in a comment, and Copilot would generate the test code using the
[Gherkin-inspired test suite functions] I wrote.

[tuple tests]: https://github.com/limulus/penumbra/blob/420867ab2c91f8bf42a4fa0e49cb4e927de9dbeb/src/lib/Tuple.spec.ts
[Gherkin-inspired test suite functions]: https://github.com/limulus/penumbra/blob/420867ab2c91f8bf42a4fa0e49cb4e927de9dbeb/src/gherkin.ts

One thing that pained me as I wrote the implementation of the [Tuple methods] was knowing how
inefficient they will be running in a JavaScript runtime. Vector math is the usual use case
for [SIMD instructions], but presumably JavaScript engines are not detecting that these
operations could be compiled to SIMD instructions. I did a bit of forward research though
and discovered that WebAssembly has SIMD support! At some point I plan to look at
reimplementing Penumbra in [AssemblyScript] — but I first want a plain JavaScript baseline
to compare against.

[Tuple methods]: https://github.com/limulus/penumbra/blob/420867ab2c91f8bf42a4fa0e49cb4e927de9dbeb/src/lib/Tuple.ts
[SIMD instructions]: https://en.wikipedia.org/wiki/SIMD
[assemblyscript]: https://www.assemblyscript.org/

Onward to chapter 2!

[//begin]: # 'Autogenerated link references for markdown compatibility'
